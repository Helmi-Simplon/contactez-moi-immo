{% extends 'vendeurBO/base.html.twig' %}

{% block title %}CONTACTEZ MOI IMMO MES OFFRES{% endblock %}
{% block titre %}MON ESPACE VENDEUR{% endblock %}

{% block body %}
<main>
<div class = "container">
<div class="h4">METTRE A JOUR MES OFFRES</div>
<hr>
 <table class="table table-dark table-hover text-warning">
  <thead>
    <tr>
      <th scope="col"><h5 class="text-success">Référence</h5></th>
      <th scope="col"><h5 class="text-success">Titre</h5></th>
      <th></th>
      <th scope="col"><h5 class="text-success text-center">Action</h5></th>
      <th></th>
      
    </tr>
  </thead>
  <tbody>
{# {{ dump(offres)}} #}
{% for offre in app.user.offre %}
 
    <tr>
      <td><h6 class="text-warning">#Ref000{{ offre.id }}</h6></td>
      
      <td><h6 class="text-warning">{{ offre.titre }}</h6></td>
      <td class="text-left"><a class="btn btn-sm btn-dark"href="{{ path('vendeur_offres_maj',{id:offre.id})}}"><h6 class="text-light">Editer</h6></a>
      </td>
      {% if offre.actif == 1 %}
      <td>
      <a class="btn btn-sm btn-dark"href="{{ path('vendeur_offres_activation',{id:offre.id})}}"><h6 class="text-info">Archiver</h6></a>
      </td>
      {% else %}
      <td>
      <a class="btn btn-sm btn-dark"href="{{ path('vendeur_offres_activation',{id:offre.id})}}"><h6 class="text-info">Publier</h6></a>
      </td>
      {% endif %}
      <td><a class="btn btn-dark btn-sm modal-trigger" data-bs-toggle="modal" data-bs-target="#modalDelete" data-id="{{ offre.id }}" data-reference="{{ offre.id }}"><h6 class="text-danger">Supprimer</h6></a></td>
    </tr>

 {% endfor %}

</tbody>
</table>
</div>
</main>

<!-- Modal -->
    <div class="modal fade" id="modalDelete" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Supprimer un article</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                ...
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                <a href="" class="btn btn-primary">Supprimer</a>
            </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    <script>
        window.onload = () => {
            let btdeletes = document.querySelectorAll(".modal-trigger")
            for(let btdelete of btdeletes) {
                btdelete.addEventListener("click", function(){
                    document.querySelector(".modal-footer a").href=`/vendeur/offres/suppression/${this.dataset.id}`
                    document.querySelector(".modal-body").innerText = `Êtes-vous sûr de vouloir supprimer la demande #REF000${this.dataset.reference} ?`
                })
            }
        }
    </script>
{% endblock %}